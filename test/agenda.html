<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profesyonel Takvim - Yönetici Ajandası</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background-color: #e5e7eb;
        }
        
        .calendar-day {
            background-color: white;
            min-height: 120px;
            position: relative;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .calendar-day:hover {
            background-color: #f8fafc;
        }
        
        .event {
            font-size: 11px;
            padding: 2px 6px;
            margin: 1px 2px;
            border-radius: 3px;
            cursor: grab;
            transition: all 0.2s;
            user-select: none;
        }
        
        .event:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .event:active {
            cursor: grabbing;
        }
        
        .event.dragging {
            opacity: 0.5;
            transform: rotate(5deg) scale(1.05);
            z-index: 1000;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .calendar-day.drag-over {
            background-color: #dbeafe !important;
            border: 2px dashed #3b82f6;
            transform: scale(1.02);
        }
        
        .event-high { background-color: #fee2e2; color: #dc2626; border-left: 3px solid #dc2626; }
        .event-medium { background-color: #fef3c7; color: #d97706; border-left: 3px solid #d97706; }
        .event-low { background-color: #dcfce7; color: #16a34a; border-left: 3px solid #16a34a; }
        .event-meeting { background-color: #dbeafe; color: #2563eb; border-left: 3px solid #2563eb; }
        
        .sidebar-item {
            transition: all 0.2s;
        }
        
        .sidebar-item:hover {
            background-color: #f3f4f6;
            transform: translateX(2px);
        }
        
        .today {
            background-color: #eff6ff;
            border: 2px solid #3b82f6;
        }
        
        .other-month {
            color: #9ca3af;
            background-color: #f9fafb;
        }
        
        .modal {
            backdrop-filter: blur(4px);
        }
        
        .quick-action-btn {
            transition: all 0.3s ease;
        }
        
        .quick-action-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        

    </style>
</head>
<body class="bg-gray-50">
    <!-- Ana Container -->
    <div class="flex h-screen">
        <!-- Ana İçerik -->
        <div class="flex-1 flex flex-col">
            <!-- Üst Bar -->
            <div class="bg-white border-b border-gray-200 p-4 flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <!-- Hızlı Eylemler -->
                        <div class="grid grid-cols-6 gap-3">
                            <!-- Üst sıra -->
                            <button id="meetingBtn" class="quick-action-btn flex flex-col items-center justify-center p-3 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl shadow-lg transition-all duration-300" title="Yeni Toplantı">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                                <span class="text-xs font-medium">Toplantı</span>
                            </button>
                            <button id="appointmentBtn" class="quick-action-btn flex flex-col items-center justify-center p-3 bg-gradient-to-br from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white rounded-xl shadow-lg transition-all duration-300" title="Randevu Oluştur">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <span class="text-xs font-medium">Randevu</span>
                            </button>
                            <button id="noteBtn" class="quick-action-btn flex flex-col items-center justify-center p-3 bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-xl shadow-lg transition-all duration-300" title="Not Ekle">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                                <span class="text-xs font-medium">Not</span>
                            </button>

                            <!-- Alt sıra -->
                            <button id="taskBtn" class="quick-action-btn flex flex-col items-center justify-center p-3 bg-gradient-to-br from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white rounded-xl shadow-lg transition-all duration-300" title="Görev Ata">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                                </svg>
                                <span class="text-xs font-medium">Görev</span>
                            </button>
                            <button id="reminderBtn" class="quick-action-btn flex flex-col items-center justify-center p-3 bg-gradient-to-br from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 text-white rounded-xl shadow-lg transition-all duration-300" title="Hatırlatıcı Oluştur">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM4.828 4.828A4 4 0 015.5 4H9v1H5.5a3 3 0 00-2.121.879l-.707.707A1 1 0 012 7.414V11h1V7.414l.879-.879zM20 12a8 8 0 11-16 0 8 8 0 0116 0z"></path>
                                </svg>
                                <span class="text-xs font-medium">Hatırlatıcı</span>
                            </button>
                            <div class="relative">
                                <button id="communicationBtn" onclick="toggleCommunicationMenu()" class="quick-action-btn flex flex-col items-center justify-center p-3 bg-gradient-to-br from-indigo-500 to-indigo-600 hover:from-indigo-600 hover:to-indigo-700 text-white rounded-xl shadow-lg transition-all duration-300 w-full" title="İletişim">
                                    <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                    </svg>
                                    <span class="text-xs font-medium">İletişim</span>
                                </button>
                                <div id="communicationMenu" class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-white rounded-lg shadow-xl border border-gray-200 py-2 w-48 hidden z-50">
                                    <button onclick="openChatModal(); closeCommunicationMenu();" class="w-full text-left px-4 py-2 hover:bg-gray-50 text-sm flex items-center gap-3">
                                        <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                        </svg>
                                        Sohbet
                                    </button>
                                    <button onclick="openSmsModal(); closeCommunicationMenu();" class="w-full text-left px-4 py-2 hover:bg-gray-50 text-sm flex items-center gap-3">
                                        <svg class="w-4 h-4 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                                        </svg>
                                        SMS Gönder
                                    </button>
                                    <button onclick="openEmailModal(); closeCommunicationMenu();" class="w-full text-left px-4 py-2 hover:bg-gray-50 text-sm flex items-center gap-3">
                                        <svg class="w-4 h-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                        </svg>
                                        E-posta Gönder
                                    </button>
                                    <button onclick="openContactsModal(); closeCommunicationMenu();" class="w-full text-left px-4 py-2 hover:bg-gray-50 text-sm flex items-center gap-3">
                                        <svg class="w-4 h-4 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                        </svg>
                                        Kişiler
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                <div class="flex items-center gap-4">
                    <h2 id="mainCalendarTitle" class="text-xl font-semibold text-gray-900">Aralık 2024</h2>
                    <div class="flex gap-1">
                        <button onclick="previousMonth()" class="p-2.5 hover:bg-gray-100 rounded-xl transition-all duration-200 hover:shadow-md transform hover:-translate-y-0.5">
                            <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <button onclick="nextMonth()" class="p-2.5 hover:bg-gray-100 rounded-xl transition-all duration-200 hover:shadow-md transform hover:-translate-y-0.5">
                            <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                        <button onclick="goToToday()" class="px-4 py-2 text-sm font-semibold text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-200 hover:shadow-md transform hover:-translate-y-0.5 border border-blue-200 hover:border-blue-300">Bugün</button>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <!-- Arama Kutusu -->
                    <div class="relative">
                        <input type="text" id="searchEvents" placeholder="Etkinlik ara..." class="pl-8 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-48">
                        <svg class="w-4 h-4 absolute left-2.5 top-2.5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </div>
                    
                    <!-- Dışa Aktarma -->
                    <div class="relative">
                        <button onclick="toggleExportMenu()" class="p-2 hover:bg-gray-100 rounded-lg transition-colors" title="Dışa Aktar">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                        </button>
                        <div id="exportMenu" class="absolute right-0 top-12 bg-white rounded-lg shadow-xl border border-gray-200 py-2 w-48 hidden z-50">
                            <button onclick="exportCalendar('pdf')" class="w-full text-left px-4 py-2 hover:bg-gray-50 text-sm flex items-center gap-2">
                                <svg class="w-4 h-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                                </svg>
                                PDF olarak indir
                            </button>
                            <button onclick="exportCalendar('excel')" class="w-full text-left px-4 py-2 hover:bg-gray-50 text-sm flex items-center gap-2">
                                <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                Excel olarak indir
                            </button>
                            <button onclick="exportCalendar('ical')" class="w-full text-left px-4 py-2 hover:bg-gray-50 text-sm flex items-center gap-2">
                                <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                iCal olarak indir
                            </button>
                            <button onclick="exportCalendar('print')" class="w-full text-left px-4 py-2 hover:bg-gray-50 text-sm flex items-center gap-2">
                                <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                                </svg>
                                Yazdır
                            </button>
                        </div>
                    </div>
                    <!-- Görünüm Seçici - Sekme Stili -->
                    <div class="flex border-b border-gray-200">
                        <button id="monthViewBtn" onclick="switchView('month')" class="px-6 py-3 text-sm font-semibold text-blue-600 border-b-2 border-blue-600 bg-blue-50 transition-all duration-200 hover:bg-blue-100 relative">
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                Ay
                            </div>
                        </button>
                        <button id="weekViewBtn" onclick="switchView('week')" class="px-6 py-3 text-sm font-semibold text-gray-600 border-b-2 border-transparent hover:text-gray-900 hover:border-gray-300 transition-all duration-200">
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                </svg>
                                Hafta
                            </div>
                        </button>
                        <button id="dayViewBtn" onclick="switchView('day')" class="px-6 py-3 text-sm font-semibold text-gray-600 border-b-2 border-transparent hover:text-gray-900 hover:border-gray-300 transition-all duration-200">
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Gün
                            </div>
                        </button>
                    </div>

                    <!-- Ayarlar Menüsü -->
                    <div class="relative">
                        <button onclick="toggleSettingsMenu()" class="p-2 hover:bg-gray-100 rounded-lg transition-colors" title="Ayarlar">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                        </button>
                        <div id="settingsMenu" class="absolute right-0 top-12 bg-white rounded-lg shadow-xl border border-gray-200 py-2 w-56 hidden z-50">
                            <div class="px-4 py-2 border-b border-gray-200">
                                <div class="font-medium text-sm text-gray-900">Takvim Ayarları</div>
                            </div>
                            <label class="flex items-center px-4 py-2 hover:bg-gray-50 cursor-pointer">
                                <input type="checkbox" id="showWeekends" checked class="mr-3">
                                <span class="text-sm">Hafta sonlarını göster</span>
                            </label>
                            <label class="flex items-center px-4 py-2 hover:bg-gray-50 cursor-pointer">
                                <input type="checkbox" id="show24Hour" class="mr-3">
                                <span class="text-sm">24 saat formatı</span>
                            </label>
                            <label class="flex items-center px-4 py-2 hover:bg-gray-50 cursor-pointer">
                                <input type="checkbox" id="showNotifications" checked class="mr-3">
                                <span class="text-sm">Bildirimler</span>
                            </label>
                            <div class="border-t border-gray-200 mt-2 pt-2">
                                <button onclick="resetCalendar()" class="w-full text-left px-4 py-2 hover:bg-gray-50 text-sm text-red-600 flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                    </svg>
                                    Takvimi Sıfırla
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Takvim -->
            <div class="flex-1 p-4" id="calendarContainer">
                <!-- Ay Görünümü -->
                <div id="monthView">
                    <!-- Gün Başlıkları -->
                    <div class="grid grid-cols-7 gap-1 mb-1">
                        <div class="text-center font-semibold text-gray-700 py-3">Pazartesi</div>
                        <div class="text-center font-semibold text-gray-700 py-3">Salı</div>
                        <div class="text-center font-semibold text-gray-700 py-3">Çarşamba</div>
                        <div class="text-center font-semibold text-gray-700 py-3">Perşembe</div>
                        <div class="text-center font-semibold text-gray-700 py-3">Cuma</div>
                        <div class="text-center font-semibold text-gray-700 py-3">Cumartesi</div>
                        <div class="text-center font-semibold text-gray-700 py-3">Pazar</div>
                    </div>
                    
                    <!-- Takvim Grid -->
                        <!-- Takvim Grid -->
                        <div class="calendar-grid rounded-lg overflow-hidden shadow-sm">
                            <!-- 1. Hafta -->
                            <div class="calendar-day other-month p-2" data-day="25">
                                <div class="font-medium text-sm mb-1">25</div>
                            </div>
                            <div class="calendar-day other-month p-2" data-day="26">
                                <div class="font-medium text-sm mb-1">26</div>
                            </div>
                            <div class="calendar-day other-month p-2" data-day="27">
                                <div class="font-medium text-sm mb-1">27</div>
                            </div>
                            <div class="calendar-day other-month p-2" data-day="28">
                                <div class="font-medium text-sm mb-1">28</div>
                            </div>
                            <div class="calendar-day other-month p-2" data-day="29">
                                <div class="font-medium text-sm mb-1">29</div>
                            </div>
                            <div class="calendar-day other-month p-2" data-day="30">
                                <div class="font-medium text-sm mb-1">30</div>
                            </div>
                            <div class="calendar-day p-2" data-day="1">
                                <div class="font-medium text-sm mb-1">1</div>
                            </div>
                            
                            <!-- 2. Hafta -->
                            <div class="calendar-day p-2" data-day="2">
                                <div class="font-medium text-sm mb-1">2</div>
                                <div class="event event-meeting" onclick="showEventDetails('Ekip Toplantısı', '2 Aralık, 09:00', 'Toplantı Odası 1')">Ekip Toplantısı 09:00</div>
                            </div>
                            <div class="calendar-day p-2" data-day="3">
                                <div class="font-medium text-sm mb-1">3</div>
                                <div class="event event-medium" onclick="showEventDetails('Proje Değerlendirme', '3 Aralık, 14:00', 'Yönetim Kurulu Salonu')">Proje Değerlendirme 14:00</div>
                            </div>
                            <div class="calendar-day p-2" data-day="4">
                                <div class="font-medium text-sm mb-1">4</div>
                            </div>
                            <div class="calendar-day p-2" data-day="5">
                                <div class="font-medium text-sm mb-1">5</div>
                                <div class="event event-high" onclick="showEventDetails('Müdürler Toplantısı', '5 Aralık, 11:00', 'Konferans Salonu')">Müdürler Toplantısı 11:00</div>
                                <div class="event event-low" onclick="showEventDetails('Doktor Randevusu', '5 Aralık, 16:30', 'Özel Hastane')">Doktor Randevusu 16:30</div>
                            </div>
                            <div class="calendar-day p-2" data-day="6">
                                <div class="font-medium text-sm mb-1">6</div>
                                <div class="event event-meeting" onclick="showEventDetails('Müşteri Sunumu', '6 Aralık, 10:00', 'Sunum Salonu')">Müşteri Sunumu 10:00</div>
                            </div>
                            <div class="calendar-day p-2" data-day="7">
                                <div class="font-medium text-sm mb-1">7</div>
                            </div>
                            <div class="calendar-day p-2" data-day="8">
                                <div class="font-medium text-sm mb-1">8</div>
                            </div>
                            
                            <!-- 3. Hafta -->
                            <div class="calendar-day p-2" data-day="9">
                                <div class="font-medium text-sm mb-1">9</div>
                                <div class="event event-medium" onclick="showEventDetails('Bütçe Toplantısı', '9 Aralık, 13:00', 'Mali İşler Odası')">Bütçe Toplantısı 13:00</div>
                            </div>
                            <div class="calendar-day p-2" data-day="10">
                                <div class="font-medium text-sm mb-1">10</div>
                            </div>
                            <div class="calendar-day p-2" data-day="11">
                                <div class="font-medium text-sm mb-1">11</div>
                                <div class="event event-meeting" onclick="showEventDetails('Strateji Toplantısı', '11 Aralık, 15:00', 'Yönetim Kurulu Salonu')">Strateji Toplantısı 15:00</div>
                            </div>
                            <div class="calendar-day p-2" data-day="12">
                                <div class="font-medium text-sm mb-1">12</div>
                                <div class="event event-high" onclick="showEventDetails('Yönetim Kurulu', '12 Aralık, 09:30', 'Yönetim Kurulu Salonu')">Yönetim Kurulu 09:30</div>
                            </div>
                            <div class="calendar-day p-2" data-day="13">
                                <div class="font-medium text-sm mb-1">13</div>
                            </div>
                            <div class="calendar-day p-2" data-day="14">
                                <div class="font-medium text-sm mb-1">14</div>
                            </div>
                            <div class="calendar-day today p-2" data-day="15">
                                <div class="font-medium text-sm mb-1 text-blue-600">15</div>
                                <div class="event event-meeting" onclick="showEventDetails('Yönetim Kurulu', '15 Aralık, 14:00', 'Yönetim Kurulu Salonu')">Yönetim Kurulu 14:00</div>
                                <div class="event event-low" onclick="showEventDetails('Spor Salonu', '15 Aralık, 18:00', 'Fitness Center')">Spor Salonu 18:00</div>
                            </div>
                            
                            <!-- 4. Hafta -->
                            <div class="calendar-day p-2" data-day="16">
                                <div class="font-medium text-sm mb-1">16</div>
                                <div class="event event-medium" onclick="showEventDetails('Proje Sunumu', '16 Aralık, 10:30', 'Sunum Salonu')">Proje Sunumu 10:30</div>
                            </div>
                            <div class="calendar-day p-2" data-day="17">
                                <div class="font-medium text-sm mb-1">17</div>
                            </div>
                            <div class="calendar-day p-2" data-day="18">
                                <div class="font-medium text-sm mb-1">18</div>
                                <div class="event event-meeting" onclick="showEventDetails('Müşteri Görüşmesi', '18 Aralık, 16:00', 'Online Toplantı')">Müşteri Görüşmesi 16:00</div>
                            </div>
                            <div class="calendar-day p-2" data-day="19">
                                <div class="font-medium text-sm mb-1">19</div>
                                <div class="event event-high" onclick="showEventDetails('Çeyrek Değerlendirme', '19 Aralık, 11:00', 'Yönetim Kurulu Salonu')">Çeyrek Değerlendirme 11:00</div>
                            </div>
                            <div class="calendar-day p-2" data-day="20">
                                <div class="font-medium text-sm mb-1">20</div>
                                <div class="event event-low" onclick="showEventDetails('Şirket Partisi', '20 Aralık, 19:00', 'Otel Ballroom')">Şirket Partisi 19:00</div>
                            </div>
                            <div class="calendar-day p-2" data-day="21">
                                <div class="font-medium text-sm mb-1">21</div>
                            </div>
                            <div class="calendar-day p-2" data-day="22">
                                <div class="font-medium text-sm mb-1">22</div>
                            </div>
                            
                            <!-- 5. Hafta -->
                            <div class="calendar-day p-2" data-day="23">
                                <div class="font-medium text-sm mb-1">23</div>
                            </div>
                            <div class="calendar-day p-2" data-day="24">
                                <div class="font-medium text-sm mb-1">24</div>
                            </div>
                            <div class="calendar-day p-2" data-day="25">
                                <div class="font-medium text-sm mb-1">25</div>
                                <div class="event event-low" onclick="showEventDetails('Noel Tatili', '25 Aralık', 'Ev')">Noel Tatili</div>
                            </div>
                            <div class="calendar-day p-2" data-day="26">
                                <div class="font-medium text-sm mb-1">26</div>
                            </div>
                            <div class="calendar-day p-2" data-day="27">
                                <div class="font-medium text-sm mb-1">27</div>
                            </div>
                            <div class="calendar-day p-2" data-day="28">
                                <div class="font-medium text-sm mb-1">28</div>
                            </div>
                            <div class="calendar-day p-2" data-day="29">
                                <div class="font-medium text-sm mb-1">29</div>
                            </div>
                            
                            <!-- 6. Hafta -->
                            <div class="calendar-day p-2" data-day="30">
                                <div class="font-medium text-sm mb-1">30</div>
                            </div>
                            <div class="calendar-day p-2" data-day="31">
                                <div class="font-medium text-sm mb-1">31</div>
                                <div class="event event-low" onclick="showEventDetails('Yılbaşı Kutlaması', '31 Aralık, 20:00', 'Otel Ballroom')">Yılbaşı Kutlaması</div>
                            </div>
                            <div class="calendar-day other-month p-2" data-day="1">
                                <div class="font-medium text-sm mb-1">1</div>
                            </div>
                            <div class="calendar-day other-month p-2" data-day="2">
                                <div class="font-medium text-sm mb-1">2</div>
                            </div>
                            <div class="calendar-day other-month p-2" data-day="3">
                                <div class="font-medium text-sm mb-1">3</div>
                            </div>
                            <div class="calendar-day other-month p-2" data-day="4">
                                <div class="font-medium text-sm mb-1">4</div>
                            </div>
                            <div class="calendar-day other-month p-2" data-day="5">
                                <div class="font-medium text-sm mb-1">5</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Hafta Görünümü -->
                    <div id="weekView" class="hidden">
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                            <div class="grid grid-cols-8 border-b border-gray-200">
                                <div class="p-3 text-center font-semibold text-gray-700 border-r border-gray-200">Saat</div>
                                <div class="p-3 text-center font-semibold text-gray-700 border-r border-gray-200">Pazartesi<br><span class="text-xs text-gray-500">16 Ara</span></div>
                                <div class="p-3 text-center font-semibold text-gray-700 border-r border-gray-200">Salı<br><span class="text-xs text-gray-500">17 Ara</span></div>
                                <div class="p-3 text-center font-semibold text-gray-700 border-r border-gray-200">Çarşamba<br><span class="text-xs text-gray-500">18 Ara</span></div>
                                <div class="p-3 text-center font-semibold text-gray-700 border-r border-gray-200">Perşembe<br><span class="text-xs text-gray-500">19 Ara</span></div>
                                <div class="p-3 text-center font-semibold text-gray-700 border-r border-gray-200">Cuma<br><span class="text-xs text-gray-500">20 Ara</span></div>
                                <div class="p-3 text-center font-semibold text-gray-700 border-r border-gray-200">Cumartesi<br><span class="text-xs text-gray-500">21 Ara</span></div>
                                <div class="p-3 text-center font-semibold text-gray-700">Pazar<br><span class="text-xs text-gray-500">22 Ara</span></div>
                            </div>
                            <div id="weekTimeSlots" class="max-h-96 overflow-y-auto">
                                <!-- Saat dilimleri buraya dinamik olarak eklenecek -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gün Görünümü -->
                    <div id="dayView" class="hidden">
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                            <div class="border-b border-gray-200 p-4">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-semibold text-gray-900">15 Aralık 2024, Pazar</h3>
                                    <div class="flex gap-2">
                                        <button onclick="previousDay()" class="p-2 hover:bg-gray-100 rounded-lg">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                            </svg>
                                        </button>
                                        <button onclick="nextDay()" class="p-2 hover:bg-gray-100 rounded-lg">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div id="dayTimeSlots" class="max-h-96 overflow-y-auto">
                                <!-- Günlük saat dilimleri buraya dinamik olarak eklenecek -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    
    <!-- Etkinlik Modal -->
    <div id="eventModal" class="fixed inset-0 bg-white modal hidden z-50">
        <div class="w-full h-full overflow-y-auto">
            <!-- Modal Header -->
            <div id="modalHeader" class="bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 id="modalTitle" class="text-sm font-medium">Yeni Etkinlik Oluştur</h3>
                            <p id="modalSubtitle" class="text-blue-100 mt-1 text-sm">Etkinlik detaylarını girin</p>
                        </div>
                    </div>
                    <button onclick="closeEventModal()" class="text-blue-100 hover:text-white p-2 rounded-lg hover:bg-blue-800 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Modal Content -->
            <div class="p-6 max-w-3xl mx-auto">
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Etkinlik Türü</label>
                            <select id="eventType" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="meeting">Toplantı</option>
                                <option value="appointment">Randevu</option>
                                <option value="note">Not</option>
                                <option value="task">Görev</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Öncelik Seviyesi</label>
                            <select id="eventPriority" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="low">Düşük Öncelik</option>
                                <option value="medium" selected>Orta Öncelik</option>
                                <option value="high">Yüksek Öncelik</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Başlık</label>
                        <input type="text" id="eventTitle" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Etkinlik başlığını girin">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Tarih</label>
                            <input type="date" id="eventDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Başlangıç Saati</label>
                            <input type="time" id="eventTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Süre</label>
                            <select id="eventDuration" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="30" selected>30 dakika</option>
                                <option value="60">1 saat</option>
                                <option value="90">1.5 saat</option>
                                <option value="120">2 saat</option>
                                <option value="180">3 saat</option>
                                <option value="240">4 saat</option>
                                <option value="480">Tüm gün</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Konum</label>
                        <select id="eventLocation" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Konum seçin</option>
                            <option value="office">Ana Ofis</option>
                            <option value="meeting-room-1">Toplantı Odası 1</option>
                            <option value="meeting-room-2">Toplantı Odası 2</option>
                            <option value="boardroom">Yönetim Kurulu Salonu</option>
                            <option value="online">Online Toplantı</option>
                            <option value="client-office">Müşteri Ofisi</option>
                            <option value="other">Diğer</option>
                        </select>
                        <input type="text" id="customLocation" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mt-3 hidden" placeholder="Özel konum adresini girin">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Katılımcılar</label>
                        <textarea id="eventParticipants" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Katılımcı e-postalarını virgülle ayırarak girin"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Açıklama</label>
                        <textarea id="eventDescription" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Etkinlik detayları, gündem maddeleri, özel notlar..."></textarea>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="sendInvitations" class="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500" checked>
                            <div class="flex items-center gap-2 ml-3">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                </svg>
                                <span class="text-sm text-gray-700">Katılımcılara davetiye gönder</span>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Modal Footer -->
            <div class="bg-gray-50 border-t border-gray-200 p-6">
                <div class="flex items-center justify-end gap-3 max-w-3xl mx-auto">
                    <button onclick="closeEventModal()" class="px-6 py-2 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg transition-all duration-200 font-medium">
                        İptal
                    </button>
                    <button onclick="saveEvent()" class="px-6 py-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg transition-all duration-200 font-medium flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        Kaydet
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Hızlı Etkinlik Menüsü -->
    <div id="quickMenu" class="fixed bg-white rounded-lg shadow-xl border border-gray-200 p-4 z-50 hidden">
        <div class="text-sm font-medium text-gray-900 mb-3" id="quickMenuDate">15 Aralık 2024</div>
        <div class="space-y-2">
            <button onclick="quickCreateEvent('meeting')" class="w-full text-left px-3 py-2 hover:bg-blue-50 rounded-lg transition-colors flex items-center gap-2">
                <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                </svg>
                <span>Toplantı Oluştur</span>
            </button>
            <button onclick="quickCreateEvent('appointment')" class="w-full text-left px-3 py-2 hover:bg-green-50 rounded-lg transition-colors flex items-center gap-2">
                <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span>Randevu Oluştur</span>
            </button>
            <button onclick="quickCreateEvent('note')" class="w-full text-left px-3 py-2 hover:bg-purple-50 rounded-lg transition-colors flex items-center gap-2">
                <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                </svg>
                <span>Not Ekle</span>
            </button>
            <button onclick="quickCreateEvent('task')" class="w-full text-left px-3 py-2 hover:bg-orange-50 rounded-lg transition-colors flex items-center gap-2">
                <svg class="w-4 h-4 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                </svg>
                <span>Görev Ata</span>
            </button>
            <hr class="my-2">
            <button onclick="closeQuickMenu()" class="w-full text-left px-3 py-2 hover:bg-gray-50 rounded-lg transition-colors text-gray-600 text-sm flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
                <span>İptal</span>
            </button>
        </div>
    </div>

    <!-- Contacts Modal -->
    <div id="contactsModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50">
        <div class="flex items-center justify-center h-full p-4">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl h-[80vh] flex flex-col">
                <div class="bg-gradient-to-r from-teal-600 to-teal-700 text-white p-4 rounded-t-xl flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="font-semibold">Kişiler</h3>
                            <p class="text-teal-100 text-sm">Kişi yönetimi ve iletişim</p>
                        </div>
                    </div>
                    <button onclick="closeContactsModal()" class="text-teal-100 hover:text-white p-2 rounded-lg hover:bg-teal-800">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="flex-1 flex">
                    <div class="w-1/3 border-r border-gray-200 p-4">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-medium text-gray-900">Kişi Listesi</h4>
                            <button onclick="addNewContact()" class="bg-teal-600 hover:bg-teal-700 text-white p-2 rounded-lg">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="mb-4">
                            <input type="text" id="contactSearch" placeholder="Kişi ara..." class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-teal-500">
                        </div>
                        <div id="contactsList" class="space-y-2 max-h-96 overflow-y-auto">
                            <!-- Kişiler buraya dinamik olarak eklenecek -->
                        </div>
                    </div>
                    <div class="flex-1 p-4">
                        <div id="contactDetails" class="text-center text-gray-500">
                            Bir kişi seçin veya yeni kişi ekleyin
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Modal -->
    <div id="chatModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50">
        <div class="flex items-center justify-center h-full p-4">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl h-96 flex flex-col">
                <div class="bg-gradient-to-r from-indigo-600 to-indigo-700 text-white p-4 rounded-t-xl flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="font-semibold">Sohbet</h3>
                            <p class="text-indigo-100 text-sm">Ekip üyeleriyle anlık mesajlaşma</p>
                        </div>
                    </div>
                    <button onclick="closeChatModal()" class="text-indigo-100 hover:text-white p-2 rounded-lg hover:bg-indigo-800">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="flex-1 flex">
                    <div class="w-1/3 border-r border-gray-200 p-4">
                        <h4 class="font-medium text-gray-900 mb-3">Kişiler</h4>
                        <div class="space-y-2">
                            <div class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer" onclick="selectChatContact('Ahmet Yılmaz')">
                                <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium">AY</div>
                                <div>
                                    <div class="font-medium text-sm">Ahmet Yılmaz</div>
                                    <div class="text-xs text-gray-500">Çevrimiçi</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer" onclick="selectChatContact('Elif Kaya')">
                                <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-medium">EK</div>
                                <div>
                                    <div class="font-medium text-sm">Elif Kaya</div>
                                    <div class="text-xs text-gray-500">5 dk önce</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer" onclick="selectChatContact('Mehmet Demir')">
                                <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium">MD</div>
                                <div>
                                    <div class="font-medium text-sm">Mehmet Demir</div>
                                    <div class="text-xs text-gray-500">Çevrimdışı</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex-1 flex flex-col">
                        <div class="flex-1 p-4 overflow-y-auto" id="chatMessages">
                            <div class="text-center text-gray-500 text-sm">Bir kişi seçin ve sohbete başlayın</div>
                        </div>
                        <div class="border-t border-gray-200 p-4">
                            <div class="flex gap-2">
                                <input type="text" id="chatInput" placeholder="Mesajınızı yazın..." class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" onkeypress="if(event.key==='Enter') sendChatMessage()">
                                <button onclick="sendChatMessage()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition-colors">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- SMS Modal -->
    <div id="smsModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50">
        <div class="flex items-center justify-center h-full p-4">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-md">
                <div class="bg-gradient-to-r from-pink-600 to-pink-700 text-white p-4 rounded-t-xl flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="font-semibold">SMS Gönder</h3>
                            <p class="text-pink-100 text-sm">Hızlı mesaj gönderimi</p>
                        </div>
                    </div>
                    <button onclick="closeSmsModal()" class="text-pink-100 hover:text-white p-2 rounded-lg hover:bg-pink-800">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="p-6 space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Alıcı Telefon</label>
                        <input type="tel" id="smsPhone" placeholder="+90 555 123 45 67" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Mesaj</label>
                        <textarea id="smsMessage" rows="4" placeholder="SMS mesajınızı yazın..." class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 resize-none"></textarea>
                        <div class="text-right text-xs text-gray-500 mt-1">
                            <span id="smsCharCount">0</span>/160 karakter
                        </div>
                    </div>
                    <div class="flex gap-3">
                        <button onclick="closeSmsModal()" class="flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">İptal</button>
                        <button onclick="sendSms()" class="flex-1 px-4 py-2 bg-pink-600 hover:bg-pink-700 text-white rounded-lg transition-colors">Gönder</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- AI Assistant Modal -->
    <div id="aiAssistantModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50">
        <div class="flex items-center justify-center h-full p-4">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl h-[80vh] flex flex-col">
                <div class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-4 rounded-t-xl flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="font-semibold">Akıllı Asistan</h3>
                            <p class="text-blue-100 text-sm">Takvim yönetimi ve planlama yardımcısı</p>
                        </div>
                    </div>
                    <button onclick="closeAIAssistant()" class="text-blue-100 hover:text-white p-2 rounded-lg hover:bg-blue-800">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="flex-1 flex flex-col">
                    <div class="flex-1 p-4 overflow-y-auto" id="aiChatMessages">
                        <div class="space-y-4">
                            <div class="flex items-start gap-3">
                                <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                    </svg>
                                </div>
                                <div class="bg-gray-100 rounded-lg p-3 max-w-sm">
                                    <p class="text-sm text-gray-900">Merhaba! Ben sizin akıllı takvim asistanınızım. Size nasıl yardımcı olabilirim?</p>
                                    <div class="text-xs text-gray-500 mt-1">Şimdi</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="border-t border-gray-200 p-4">
                        <div class="flex gap-2 mb-3">
                            <button onclick="askAI('Bugünkü programımı özetle')" class="text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-200 transition-colors">Bugünkü program</button>
                            <button onclick="askAI('Boş zamanlarımı göster')" class="text-xs bg-green-100 text-green-700 px-3 py-1 rounded-full hover:bg-green-200 transition-colors">Boş zamanlar</button>
                            <button onclick="askAI('Toplantı öner')" class="text-xs bg-purple-100 text-purple-700 px-3 py-1 rounded-full hover:bg-purple-200 transition-colors">Toplantı öner</button>
                        </div>
                        <div class="flex gap-2">
                            <input type="text" id="aiInput" placeholder="Asistana bir şey sorun..." class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" onkeypress="if(event.key==='Enter') sendAIMessage()">
                            <button onclick="sendAIMessage()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Email Modal -->
    <div id="emailModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50">
        <div class="flex items-center justify-center h-full p-4">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
                <div class="bg-gradient-to-r from-red-600 to-red-700 text-white p-4 rounded-t-xl flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="font-semibold">E-posta Gönder</h3>
                            <p class="text-red-100 text-sm">Profesyonel e-posta gönderimi</p>
                        </div>
                    </div>
                    <button onclick="closeEmailModal()" class="text-red-100 hover:text-white p-2 rounded-lg hover:bg-red-800">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="p-6 space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Kime</label>
                            <input type="email" id="emailTo" placeholder="ornek@email.com" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Kopya (CC)</label>
                            <input type="email" id="emailCc" placeholder="kopya@email.com" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Konu</label>
                        <input type="text" id="emailSubject" placeholder="E-posta konusu" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Mesaj</label>
                        <div class="border border-gray-300 rounded-lg">
                            <div class="border-b border-gray-200 p-2 flex gap-2">
                                <button onclick="formatEmail('bold')" class="p-1 hover:bg-gray-100 rounded" title="Kalın">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 4h8a4 4 0 014 4 4 4 0 01-4 4H6z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12h9a4 4 0 014 4 4 4 0 01-4 4H6z"></path>
                                    </svg>
                                </button>
                                <button onclick="formatEmail('italic')" class="p-1 hover:bg-gray-100 rounded" title="İtalik">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 4h-9m4 16H5m4-8l4-4"></path>
                                    </svg>
                                </button>
                                <button onclick="insertEmailTemplate()" class="p-1 hover:bg-gray-100 rounded text-xs px-2" title="Şablon Ekle">
                                    Şablon
                                </button>
                            </div>
                            <textarea id="emailMessage" rows="8" placeholder="E-posta mesajınızı yazın..." class="w-full px-3 py-2 border-0 rounded-b-lg focus:ring-2 focus:ring-red-500 resize-none"></textarea>
                        </div>
                    </div>
                    <div class="flex items-center gap-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="emailPriority" class="w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500">
                            <span class="ml-2 text-sm text-gray-700">Yüksek öncelik</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="emailReadReceipt" class="w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500">
                            <span class="ml-2 text-sm text-gray-700">Okundu bilgisi iste</span>
                        </label>
                    </div>
                    <div class="flex gap-3">
                        <button onclick="closeEmailModal()" class="flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">İptal</button>
                        <button onclick="saveDraft()" class="px-6 py-2 text-gray-700 bg-yellow-100 hover:bg-yellow-200 rounded-lg transition-colors">Taslak</button>
                        <button onclick="sendEmail()" class="flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors">Gönder</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global değişkenler
        let currentMonth = 11; // Aralık (0-11)
        let currentYear = 2024;
        let currentView = 'month';
        let selectedDate = null;
        
        const months = [
            'Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran',
            'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'
        ];
        
        // Sayfa yüklendiğinde çalışacak fonksiyonlar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('📅 Takvim sistemi başlatılıyor...');
            initializeCalendar();
            setupEventListeners();
            setupKeyboardShortcuts();
            loadQuickNotes();
            console.log('✅ Tüm özellikler aktif!');
        });
        
        function initializeCalendar() {
            // Bugünün tarihini varsayılan olarak ayarla
            const today = new Date();
            const dateString = today.toISOString().split('T')[0];
            const timeString = today.toTimeString().slice(0, 5);
            
            const dateInput = document.getElementById('eventDate');
            const timeInput = document.getElementById('eventTime');
            
            if (dateInput) dateInput.value = dateString;
            if (timeInput) timeInput.value = timeString;
        }
        
        function setupEventListeners() {
            // Hızlı eylem butonları - İlk sıra
            const meetingBtn = document.getElementById('meetingBtn');
            const appointmentBtn = document.getElementById('appointmentBtn');
            const noteBtn = document.getElementById('noteBtn');
            const taskBtn = document.getElementById('taskBtn');
            
            if (meetingBtn) meetingBtn.addEventListener('click', () => openEventModal('meeting'));
            if (appointmentBtn) appointmentBtn.addEventListener('click', () => openEventModal('appointment'));
            if (noteBtn) noteBtn.addEventListener('click', () => openEventModal('note'));
            if (taskBtn) taskBtn.addEventListener('click', () => openEventModal('task'));
            
            const reminderBtn = document.getElementById('reminderBtn');
            if (reminderBtn) reminderBtn.addEventListener('click', () => openEventModal('reminder'));
            
            // İletişim menüsü için event listener'lar modal açma fonksiyonlarında tanımlanacak
            
            // Sürükle-bırak özelliği
            setupDragAndDrop();
            
            // Takvim günlerine tıklama
            const calendarDays = document.querySelectorAll('.calendar-day');
            calendarDays.forEach(day => {
                day.addEventListener('click', function(event) {
                    if (event.target.classList.contains('event')) return; // Etkinlik tıklamasını engelle
                    
                    const dayNumber = this.getAttribute('data-day');
                    if (!this.classList.contains('other-month')) {
                        showQuickMenu(event, parseInt(dayNumber));
                    }
                });
            });
            
            // Konum seçimi değişikliği
            const locationSelect = document.getElementById('eventLocation');
            if (locationSelect) {
                locationSelect.addEventListener('change', function() {
                    const customLocationInput = document.getElementById('customLocation');
                    if (this.value === 'other') {
                        customLocationInput.classList.remove('hidden');
                    } else {
                        customLocationInput.classList.add('hidden');
                    }
                });
            }
            
            // SMS karakter sayacı
            const smsMessageInput = document.getElementById('smsMessage');
            if (smsMessageInput) {
                smsMessageInput.addEventListener('input', function() {
                    const charCount = this.value.length;
                    const charCountElement = document.getElementById('smsCharCount');
                    if (charCountElement) {
                        charCountElement.textContent = charCount;
                        if (charCount > 160) {
                            charCountElement.style.color = '#ef4444';
                        } else {
                            charCountElement.style.color = '#6b7280';
                        }
                    }
                });
            }
            
            // Arama fonksiyonu
            const searchInput = document.getElementById('searchEvents');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const events = document.querySelectorAll('.event');
                    
                    events.forEach(event => {
                        const eventText = event.textContent.toLowerCase();
                        const parentDay = event.closest('.calendar-day');
                        
                        if (eventText.includes(searchTerm) || searchTerm === '') {
                            event.style.display = 'block';
                            if (parentDay) parentDay.style.opacity = '1';
                        } else {
                            event.style.display = 'none';
                        }
                    });
                });
            }
            
            // Dışarı tıklandığında menüleri kapat
            document.addEventListener('click', function(event) {
                const exportMenu = document.getElementById('exportMenu');
                const settingsMenu = document.getElementById('settingsMenu');
                const quickMenu = document.getElementById('quickMenu');
                const communicationMenu = document.getElementById('communicationMenu');
                
                if (!event.target.closest('[onclick*="toggleExportMenu"]') && exportMenu && !exportMenu.contains(event.target)) {
                    exportMenu.classList.add('hidden');
                }
                
                if (!event.target.closest('[onclick*="toggleSettingsMenu"]') && settingsMenu && !settingsMenu.contains(event.target)) {
                    settingsMenu.classList.add('hidden');
                }
                
                if (!event.target.closest('[onclick*="toggleCommunicationMenu"]') && communicationMenu && !communicationMenu.contains(event.target)) {
                    communicationMenu.classList.add('hidden');
                }
                
                if (!quickMenu.contains(event.target)) {
                    closeQuickMenu();
                }
            });
        }
        
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                // Ctrl/Cmd + N: Yeni toplantı
                if ((e.ctrlKey || e.metaKey) && e.key === 'n') {
                    e.preventDefault();
                    openEventModal('meeting');
                }
                
                // Escape: Modal kapat
                if (e.key === 'Escape') {
                    closeEventModal();
                    closeQuickMenu();
                }
                
                // Sol/Sağ ok: Ay değiştir (sadece modal açık değilse)
                if (e.key === 'ArrowLeft' && !isModalOpen()) {
                    previousMonth();
                }
                if (e.key === 'ArrowRight' && !isModalOpen()) {
                    nextMonth();
                }
            });
        }
        
        // Modal işlemleri
        function openEventModal(type = 'meeting') {
            console.log('Modal açılıyor:', type);
            const modal = document.getElementById('eventModal');
            if (modal) {
                modal.classList.remove('hidden');
                updateModalForType(type);
                
                // Bugünün tarihini varsayılan olarak ayarla
                const today = new Date();
                const dateString = today.toISOString().split('T')[0];
                const timeString = today.toTimeString().slice(0, 5);
                
                const dateInput = document.getElementById('eventDate');
                const timeInput = document.getElementById('eventTime');
                
                if (dateInput) dateInput.value = dateString;
                if (timeInput) timeInput.value = timeString;
            }
        }
        
        function updateModalForType(type) {
            const modalTitle = document.getElementById('modalTitle');
            const modalHeader = document.getElementById('modalHeader');
            const eventType = document.getElementById('eventType');
            
            const titles = {
                'meeting': 'Yeni Toplantı Oluştur',
                'appointment': 'Yeni Randevu Oluştur',
                'note': 'Yeni Not Ekle',
                'task': 'Yeni Görev Ata',
                'reminder': 'Yeni Hatırlatıcı Oluştur'
            };
            
            const colors = {
                'meeting': 'bg-gradient-to-r from-blue-600 to-blue-700',
                'appointment': 'bg-gradient-to-r from-emerald-600 to-emerald-700',
                'note': 'bg-gradient-to-r from-purple-600 to-purple-700',
                'task': 'bg-gradient-to-r from-amber-600 to-amber-700',
                'reminder': 'bg-gradient-to-r from-rose-600 to-rose-700'
            };
            
            if (modalTitle) modalTitle.textContent = titles[type] || titles['meeting'];
            if (eventType) eventType.value = type;
            if (modalHeader) {
                modalHeader.className = `${colors[type] || colors['meeting']} text-white p-6`;
            }
        }
        
        function closeEventModal() {
            const modal = document.getElementById('eventModal');
            if (modal) {
                modal.classList.add('hidden');
                clearForm();
            }
        }
        
        function clearForm() {
            const fields = ['eventTitle', 'eventDescription', 'eventParticipants', 'customLocation'];
            fields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) field.value = '';
            });
            
            // Checkbox'ları sıfırla
            const sendInvitations = document.getElementById('sendInvitations');
            if (sendInvitations) sendInvitations.checked = true;
            
            // Select'leri sıfırla
            const selects = {
                'eventType': 'meeting',
                'eventPriority': 'medium',
                'eventDuration': '30',
                'eventLocation': ''
            };
            
            Object.entries(selects).forEach(([id, value]) => {
                const select = document.getElementById(id);
                if (select) select.value = value;
            });
            
            // Custom location'ı gizle
            const customLocation = document.getElementById('customLocation');
            if (customLocation) customLocation.classList.add('hidden');
        }
        
        function saveEvent() {
            const title = document.getElementById('eventTitle').value.trim();
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const type = document.getElementById('eventType').value;
            const priority = document.getElementById('eventPriority').value;
            const location = document.getElementById('eventLocation').value;
            const participants = document.getElementById('eventParticipants').value.trim();
            
            if (!title || !date || !time) {
                showAdvancedNotification('⚠️ Lütfen başlık, tarih ve saat alanlarını doldurun!', 'warning');
                return;
            }
            
            // Etkinliği kaydet (simülasyon)
            const eventData = {
                title,
                date,
                time,
                type,
                priority,
                location,
                participants,
                id: Date.now()
            };
            
            // LocalStorage'a kaydet
            const events = JSON.parse(localStorage.getItem('calendarEvents') || '[]');
            events.push(eventData);
            localStorage.setItem('calendarEvents', JSON.stringify(events));
            
            // Hatırlatıcı ayarla (etkinlikten 15 dakika önce)
            const eventDateTime = new Date(`${date}T${time}`);
            const reminderTime = new Date(eventDateTime.getTime() - 15 * 60000); // 15 dakika önce
            
            if (reminderTime > new Date()) {
                scheduleReminder(title, reminderTime, eventDateTime);
            }
            
            // Başarı mesajı
            const typeNames = {
                'meeting': 'Toplantı',
                'appointment': 'Randevu',
                'note': 'Not',
                'task': 'Görev'
            };
            
            const actions = [
                {
                    text: 'Görüntüle',
                    onClick: `showEventDetails('${title}', '${date} ${time}', '${location || 'Belirtilmemiş'}')`
                }
            ];
            
            showAdvancedNotification(
                `🎉 ${typeNames[type]} başarıyla oluşturuldu! Hatırlatıcı 15 dakika öncesinde gelecek.`,
                'success',
                5000,
                actions
            );
            
            closeEventModal();
        }
        
        // Takvim navigasyonu
        function updateCalendarHeader() {
            const mainTitle = document.getElementById('mainCalendarTitle');
            if (mainTitle) {
                mainTitle.textContent = `${months[currentMonth]} ${currentYear}`;
            }
        }
        
        function previousMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            updateCalendarHeader();
        }
        
        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            updateCalendarHeader();
        }
        
        function goToToday() {
            const today = new Date();
            currentMonth = today.getMonth();
            currentYear = today.getFullYear();
            updateCalendarHeader();
            showNotification('📅 Bugüne gidildi!', 'info');
        }
        
        function miniPreviousMonth() {
            // Mini takvim için ayrı fonksiyon
            showNotification('📅 Mini takvim güncellendi!', 'info');
        }
        
        function miniNextMonth() {
            // Mini takvim için ayrı fonksiyon
            showNotification('📅 Mini takvim güncellendi!', 'info');
        }
        
        // Görünüm değiştirme
        function switchView(view) {
            currentView = view;
            
            // Tüm görünümleri gizle
            const views = ['monthView', 'weekView', 'dayView'];
            views.forEach(viewId => {
                const viewElement = document.getElementById(viewId);
                if (viewElement) {
                    viewElement.classList.add('hidden');
                }
            });
            
            // Seçilen görünümü göster
            const selectedView = document.getElementById(view + 'View');
            if (selectedView) {
                selectedView.classList.remove('hidden');
            }
            
            // Buton stillerini güncelle - Sekme stili
            const buttons = ['monthViewBtn', 'weekViewBtn', 'dayViewBtn'];
            buttons.forEach(btnId => {
                const btn = document.getElementById(btnId);
                if (btn) {
                    btn.className = 'px-6 py-3 text-sm font-semibold text-gray-600 border-b-2 border-transparent hover:text-gray-900 hover:border-gray-300 transition-all duration-200';
                    // İkon ve metin yapısını koru
                    if (!btn.querySelector('svg')) {
                        const icons = {
                            'monthViewBtn': '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>',
                            'weekViewBtn': '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>',
                            'dayViewBtn': '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'
                        };
                        const texts = {
                            'monthViewBtn': 'Ay',
                            'weekViewBtn': 'Hafta',
                            'dayViewBtn': 'Gün'
                        };
                        btn.innerHTML = `<div class="flex items-center gap-2">${icons[btnId]}${texts[btnId]}</div>`;
                    }
                }
            });
            
            // Aktif sekmeyi vurgula
            const activeBtn = document.getElementById(view + 'ViewBtn');
            if (activeBtn) {
                activeBtn.className = 'px-6 py-3 text-sm font-semibold text-blue-600 border-b-2 border-blue-600 bg-blue-50 transition-all duration-200 hover:bg-blue-100 relative';
            }
            
            // Görünüme özel içerik yükle
            if (view === 'week') {
                loadWeekView();
            } else if (view === 'day') {
                loadDayView();
            }
            
            showAdvancedNotification(`📅 ${view === 'month' ? 'Ay' : view === 'week' ? 'Hafta' : 'Gün'} görünümüne geçildi`, 'info', 2000);
        }
        
        function loadWeekView() {
            const weekTimeSlots = document.getElementById('weekTimeSlots');
            if (!weekTimeSlots) return;
            
            let slotsHTML = '';
            for (let hour = 8; hour <= 18; hour++) {
                const timeStr = hour.toString().padStart(2, '0') + ':00';
                slotsHTML += `
                    <div class="grid grid-cols-8 border-b border-gray-100 hover:bg-gray-50">
                        <div class="p-2 text-xs text-gray-500 border-r border-gray-200 text-center">${timeStr}</div>
                        <div class="p-2 border-r border-gray-200 min-h-[40px] cursor-pointer hover:bg-blue-50" onclick="quickAddEvent('monday', ${hour})"></div>
                        <div class="p-2 border-r border-gray-200 min-h-[40px] cursor-pointer hover:bg-blue-50" onclick="quickAddEvent('tuesday', ${hour})"></div>
                        <div class="p-2 border-r border-gray-200 min-h-[40px] cursor-pointer hover:bg-blue-50" onclick="quickAddEvent('wednesday', ${hour})">
                            ${hour === 16 ? '<div class="text-xs bg-blue-100 text-blue-800 p-1 rounded">Müşteri Görüşmesi</div>' : ''}
                        </div>
                        <div class="p-2 border-r border-gray-200 min-h-[40px] cursor-pointer hover:bg-blue-50" onclick="quickAddEvent('thursday', ${hour})">
                            ${hour === 11 ? '<div class="text-xs bg-red-100 text-red-800 p-1 rounded">Çeyrek Değerlendirme</div>' : ''}
                        </div>
                        <div class="p-2 border-r border-gray-200 min-h-[40px] cursor-pointer hover:bg-blue-50" onclick="quickAddEvent('friday', ${hour})">
                            ${hour === 19 ? '<div class="text-xs bg-green-100 text-green-800 p-1 rounded">Şirket Partisi</div>' : ''}
                        </div>
                        <div class="p-2 border-r border-gray-200 min-h-[40px] cursor-pointer hover:bg-blue-50" onclick="quickAddEvent('saturday', ${hour})"></div>
                        <div class="p-2 min-h-[40px] cursor-pointer hover:bg-blue-50" onclick="quickAddEvent('sunday', ${hour})"></div>
                    </div>
                `;
            }
            weekTimeSlots.innerHTML = slotsHTML;
        }
        
        function loadDayView() {
            const dayTimeSlots = document.getElementById('dayTimeSlots');
            if (!dayTimeSlots) return;
            
            let slotsHTML = '';
            for (let hour = 8; hour <= 20; hour++) {
                const timeStr = hour.toString().padStart(2, '0') + ':00';
                slotsHTML += `
                    <div class="flex border-b border-gray-100 hover:bg-gray-50">
                        <div class="w-20 p-3 text-sm text-gray-500 border-r border-gray-200 text-center">${timeStr}</div>
                        <div class="flex-1 p-3 min-h-[60px] cursor-pointer hover:bg-blue-50" onclick="quickAddEvent('today', ${hour})">
                            ${hour === 14 ? '<div class="bg-blue-100 text-blue-800 p-2 rounded-lg text-sm font-medium">Yönetim Kurulu Toplantısı<br><span class="text-xs">Yönetim Kurulu Salonu</span></div>' : ''}
                            ${hour === 18 ? '<div class="bg-green-100 text-green-800 p-2 rounded-lg text-sm font-medium">Spor Salonu<br><span class="text-xs">Fitness Center</span></div>' : ''}
                        </div>
                    </div>
                `;
            }
            dayTimeSlots.innerHTML = slotsHTML;
        }
        
        function quickAddEvent(day, hour) {
            openEventModal('meeting');
            const timeInput = document.getElementById('eventTime');
            if (timeInput) {
                timeInput.value = hour.toString().padStart(2, '0') + ':00';
            }
        }
        
        function previousDay() {
            showAdvancedNotification('📅 Önceki güne geçildi', 'info', 2000);
        }
        
        function nextDay() {
            showAdvancedNotification('📅 Sonraki güne geçildi', 'info', 2000);
        }
        
        // Hızlı menü işlemleri
        function showQuickMenu(event, dayNumber) {
            event.stopPropagation();
            const quickMenu = document.getElementById('quickMenu');
            const quickMenuDate = document.getElementById('quickMenuDate');
            
            selectedDate = dayNumber;
            if (quickMenuDate) {
                quickMenuDate.textContent = `${dayNumber} ${months[currentMonth]} ${currentYear}`;
            }
            
            if (quickMenu) {
                // Menüyü mouse pozisyonunda göster
                quickMenu.style.left = event.pageX + 'px';
                quickMenu.style.top = event.pageY + 'px';
                quickMenu.classList.remove('hidden');
                
                // Ekran sınırlarını kontrol et
                setTimeout(() => {
                    const rect = quickMenu.getBoundingClientRect();
                    if (rect.right > window.innerWidth) {
                        quickMenu.style.left = (event.pageX - rect.width) + 'px';
                    }
                    if (rect.bottom > window.innerHeight) {
                        quickMenu.style.top = (event.pageY - rect.height) + 'px';
                    }
                }, 10);
            }
        }
        
        function closeQuickMenu() {
            const quickMenu = document.getElementById('quickMenu');
            if (quickMenu) {
                quickMenu.classList.add('hidden');
            }
            selectedDate = null;
        }
        
        function quickCreateEvent(type) {
            closeQuickMenu();
            openEventModal(type);
            
            // Seçilen tarihi form alanına otomatik doldur
            if (selectedDate) {
                const selectedDateObj = new Date(currentYear, currentMonth, selectedDate);
                const dateString = selectedDateObj.toISOString().split('T')[0];
                const dateInput = document.getElementById('eventDate');
                if (dateInput) {
                    dateInput.value = dateString;
                }
            }
        }
        
        // Etkinlik detayları
        function showEventDetails(title, time, location) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform transition-all">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                </div>
                                <h3 class="text-sm font-medium text-gray-900">Etkinlik Detayları</h3>
                            </div>
                            <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="space-y-3">
                            <div>
                                <span class="font-medium text-gray-700">Başlık:</span>
                                <p class="text-gray-900">${title}</p>
                            </div>
                            <div>
                                <span class="font-medium text-gray-700">Zaman:</span>
                                <p class="text-gray-900">${time}</p>
                            </div>
                            <div>
                                <span class="font-medium text-gray-700">Konum:</span>
                                <p class="text-gray-900">${location}</p>
                            </div>
                            <div class="grid grid-cols-2 gap-2 pt-4">
                                <button onclick="editEvent('${title}'); this.closest('.fixed').remove();" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg transition-colors flex items-center justify-center gap-1 text-sm">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                    </svg>
                                    Düzenle
                                </button>
                                <button onclick="postponeEvent('${title}'); this.closest('.fixed').remove();" class="bg-amber-600 hover:bg-amber-700 text-white px-3 py-2 rounded-lg transition-colors flex items-center justify-center gap-1 text-sm">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    Ertele
                                </button>
                                <button onclick="cancelEvent('${title}'); this.closest('.fixed').remove();" class="bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-lg transition-colors flex items-center justify-center gap-1 text-sm">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                    İptal Et
                                </button>
                                <button onclick="deleteEvent('${title}'); this.closest('.fixed').remove();" class="bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg transition-colors flex items-center justify-center gap-1 text-sm">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    Sil
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        function editEvent(eventTitle) {
            openEventModal('meeting');
            const titleInput = document.getElementById('eventTitle');
            if (titleInput) {
                titleInput.value = eventTitle;
            }
        }
        
        function deleteEvent(eventTitle) {
            if (confirm(`"${eventTitle}" etkinliğini silmek istediğinizden emin misiniz?`)) {
                showNotification('🗑️ Etkinlik silindi!', 'success');
            }
        }
        
        function postponeEvent(eventTitle) {
            const postponeModal = document.createElement('div');
            postponeModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]';
            postponeModal.innerHTML = `
                <div class="bg-white rounded-xl shadow-2xl max-w-md w-full mx-4">
                    <div class="bg-gradient-to-r from-amber-600 to-amber-700 text-white p-4 rounded-t-xl">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-semibold">Etkinliği Ertele</h3>
                                <p class="text-amber-100 text-sm">${eventTitle}</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Yeni Tarih</label>
                            <input type="date" id="postponeDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Yeni Saat</label>
                            <input type="time" id="postponeTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Erteleme Nedeni (Opsiyonel)</label>
                            <textarea id="postponeReason" rows="3" placeholder="Erteleme nedenini belirtin..." class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 resize-none"></textarea>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="notifyParticipants" checked class="w-4 h-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500">
                            <label for="notifyParticipants" class="ml-2 text-sm text-gray-700">Katılımcıları bilgilendir</label>
                        </div>
                        <div class="flex gap-3">
                            <button onclick="this.closest('.fixed').remove();" class="flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">İptal</button>
                            <button onclick="confirmPostpone('${eventTitle}'); this.closest('.fixed').remove();" class="flex-1 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg transition-colors">Ertele</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(postponeModal);
            
            // Bugünden sonraki tarihi varsayılan olarak ayarla
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const dateInput = postponeModal.querySelector('#postponeDate');
            if (dateInput) {
                dateInput.value = tomorrow.toISOString().split('T')[0];
            }
        }
        
        function confirmPostpone(eventTitle) {
            const date = document.getElementById('postponeDate').value;
            const time = document.getElementById('postponeTime').value;
            const reason = document.getElementById('postponeReason').value;
            const notify = document.getElementById('notifyParticipants').checked;
            
            if (!date || !time) {
                showAdvancedNotification('⚠️ Lütfen yeni tarih ve saat belirtin!', 'warning');
                return;
            }
            
            const postponeData = {
                eventTitle,
                newDate: date,
                newTime: time,
                reason,
                notify,
                timestamp: new Date().toLocaleString('tr-TR')
            };
            
            // LocalStorage'a kaydet
            const postponedEvents = JSON.parse(localStorage.getItem('postponedEvents') || '[]');
            postponedEvents.push(postponeData);
            localStorage.setItem('postponedEvents', JSON.stringify(postponedEvents));
            
            const dateStr = new Date(date).toLocaleDateString('tr-TR');
            const message = notify ? 
                `⏰ "${eventTitle}" etkinliği ${dateStr} ${time} tarihine ertelendi. Katılımcılar bilgilendirildi.` :
                `⏰ "${eventTitle}" etkinliği ${dateStr} ${time} tarihine ertelendi.`;
            
            showAdvancedNotification(message, 'success', 5000);
        }
        
        function cancelEvent(eventTitle) {
            const cancelModal = document.createElement('div');
            cancelModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]';
            cancelModal.innerHTML = `
                <div class="bg-white rounded-xl shadow-2xl max-w-md w-full mx-4">
                    <div class="bg-gradient-to-r from-orange-600 to-orange-700 text-white p-4 rounded-t-xl">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-semibold">Etkinliği İptal Et</h3>
                                <p class="text-orange-100 text-sm">${eventTitle}</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="bg-orange-50 border border-orange-200 rounded-lg p-3">
                            <div class="flex items-start gap-2">
                                <svg class="w-5 h-5 text-orange-600 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                                </svg>
                                <div class="text-sm text-orange-800">
                                    <div class="font-medium">Bu etkinlik iptal edilecek</div>
                                    <div class="mt-1">İptal edilen etkinlik geri alınamaz. Katılımcılar otomatik olarak bilgilendirilir.</div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">İptal Nedeni</label>
                            <textarea id="cancelReason" rows="3" placeholder="İptal nedenini belirtin..." class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none"></textarea>
                        </div>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="notifyCancelParticipants" checked class="w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500">
                                <span class="ml-2 text-sm text-gray-700">Katılımcıları bilgilendir</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="suggestAlternative" class="w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500">
                                <span class="ml-2 text-sm text-gray-700">Alternatif tarih öner</span>
                            </label>
                        </div>
                        <div class="flex gap-3">
                            <button onclick="this.closest('.fixed').remove();" class="flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">Vazgeç</button>
                            <button onclick="confirmCancel('${eventTitle}'); this.closest('.fixed').remove();" class="flex-1 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors">İptal Et</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(cancelModal);
        }
        
        function confirmCancel(eventTitle) {
            const reason = document.getElementById('cancelReason').value;
            const notify = document.getElementById('notifyCancelParticipants').checked;
            const suggest = document.getElementById('suggestAlternative').checked;
            
            const cancelData = {
                eventTitle,
                reason,
                notify,
                suggestAlternative: suggest,
                timestamp: new Date().toLocaleString('tr-TR')
            };
            
            // LocalStorage'a kaydet
            const cancelledEvents = JSON.parse(localStorage.getItem('cancelledEvents') || '[]');
            cancelledEvents.push(cancelData);
            localStorage.setItem('cancelledEvents', JSON.stringify(cancelledEvents));
            
            let message = `❌ "${eventTitle}" etkinliği iptal edildi.`;
            if (notify) message += ' Katılımcılar bilgilendirildi.';
            if (suggest) message += ' Alternatif tarih önerisi gönderildi.';
            
            const actions = suggest ? [
                {
                    text: 'Yeni Tarih Belirle',
                    onClick: `openEventModal('meeting')`
                }
            ] : [];
            
            showAdvancedNotification(message, 'warning', 5000, actions);
        }
        
        // Sürükle-bırak işlemleri
        function setupDragAndDrop() {
            const events = document.querySelectorAll('.event');
            const calendarDays = document.querySelectorAll('.calendar-day');
            
            events.forEach(event => {
                event.draggable = true;
                
                event.addEventListener('dragstart', function(e) {
                    this.classList.add('dragging');
                    e.dataTransfer.setData('text/plain', this.textContent);
                    e.dataTransfer.setData('event-id', this.getAttribute('data-event-id') || Date.now());
                    e.dataTransfer.effectAllowed = 'move';
                    
                    // Sürükleme başladığında bildirim göster
                    showAdvancedNotification('🔄 Etkinlik taşınıyor...', 'info', 2000);
                });
                
                event.addEventListener('dragend', function(e) {
                    this.classList.remove('dragging');
                });
            });
            
            calendarDays.forEach(day => {
                day.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'move';
                    this.classList.add('drag-over');
                });
                
                day.addEventListener('dragleave', function(e) {
                    this.classList.remove('drag-over');
                });
                
                day.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');
                    
                    const eventText = e.dataTransfer.getData('text/plain');
                    const eventId = e.dataTransfer.getData('event-id');
                    const targetDay = this.getAttribute('data-day');
                    
                    if (!this.classList.contains('other-month') && eventText && targetDay) {
                        // Etkinliği yeni güne taşı
                        moveEventToDay(eventText, targetDay, eventId);
                        showAdvancedNotification(`✅ Etkinlik ${targetDay} ${months[currentMonth]} tarihine taşındı!`, 'success', 3000);
                    } else {
                        showAdvancedNotification('❌ Etkinlik bu tarihe taşınamaz!', 'error', 3000);
                    }
                });
            });
        }
        
        function moveEventToDay(eventText, targetDay, eventId) {
            // Eski etkinliği bul ve kaldır
            const allEvents = document.querySelectorAll('.event');
            let eventElement = null;
            
            allEvents.forEach(event => {
                if (event.textContent === eventText) {
                    eventElement = event.cloneNode(true);
                    event.remove();
                }
            });
            
            if (eventElement) {
                // Yeni güne ekle
                const targetDayElement = document.querySelector(`[data-day="${targetDay}"]:not(.other-month)`);
                if (targetDayElement) {
                    eventElement.setAttribute('data-event-id', eventId);
                    targetDayElement.appendChild(eventElement);
                    
                    // Yeni eklenen etkinlik için drag&drop özelliğini tekrar ayarla
                    setupSingleEventDrag(eventElement);
                }
            }
        }
        
        function setupSingleEventDrag(eventElement) {
            eventElement.draggable = true;
            
            eventElement.addEventListener('dragstart', function(e) {
                this.classList.add('dragging');
                e.dataTransfer.setData('text/plain', this.textContent);
                e.dataTransfer.setData('event-id', this.getAttribute('data-event-id') || Date.now());
                e.dataTransfer.effectAllowed = 'move';
            });
            
            eventElement.addEventListener('dragend', function(e) {
                this.classList.remove('dragging');
            });
        }
        
        // Basit bildirim sistemi (sadece console log)
        function showAdvancedNotification(message, type = 'info', duration = 4000, actions = []) {
            console.log(`${type.toUpperCase()}: ${message}`);
        }
        
        function removeNotification(element) {
            // Bildirim sistemi devre dışı
        }
        
        // Hatırlatıcı sistemi
        function scheduleReminder(eventTitle, reminderTime, eventTime) {
            const now = new Date();
            const reminderDate = new Date(reminderTime);
            const eventDate = new Date(eventTime);
            
            if (reminderDate > now) {
                const timeUntilReminder = reminderDate.getTime() - now.getTime();
                
                setTimeout(() => {
                    const actions = [
                        {
                            text: 'Görüntüle',
                            onClick: `showEventDetails('${eventTitle}', '${eventTime}', 'Detaylar')`
                        },
                        {
                            text: '5 dk ertele',
                            onClick: `snoozeReminder('${eventTitle}', 5)`
                        }
                    ];
                    
                    showAdvancedNotification(
                        `🔔 Yaklaşan etkinlik: ${eventTitle}`,
                        'reminder',
                        0, // Kalıcı bildirim
                        actions
                    );
                    
                    // Ses efekti (opsiyonel)
                    playNotificationSound();
                }, timeUntilReminder);
            }
        }
        
        function snoozeReminder(eventTitle, minutes) {
            const snoozeTime = new Date(Date.now() + minutes * 60000);
            scheduleReminder(eventTitle, snoozeTime, snoozeTime);
            showAdvancedNotification(`⏰ Hatırlatıcı ${minutes} dakika ertelendi`, 'info', 2000);
        }
        
        function playNotificationSound() {
            // Basit ses efekti (Web Audio API kullanarak)
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.1);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (e) {
                console.log('Ses çalınamadı:', e);
            }
        }
        
        // Basit bildirim fonksiyonu
        function showNotification(message, type = 'info') {
            console.log(`${type.toUpperCase()}: ${message}`);
        }
        
        function isModalOpen() {
            const modal = document.getElementById('eventModal');
            return modal && !modal.classList.contains('hidden');
        }
        
        // Menü toggle fonksiyonları
        function toggleExportMenu() {
            const menu = document.getElementById('exportMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }
        
        function toggleSettingsMenu() {
            const menu = document.getElementById('settingsMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }
        
        function toggleCommunicationMenu() {
            const menu = document.getElementById('communicationMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }
        
        function closeCommunicationMenu() {
            const menu = document.getElementById('communicationMenu');
            if (menu) {
                menu.classList.add('hidden');
            }
        }
        
        // Export fonksiyonları
        function exportCalendar(format) {
            toggleExportMenu();
            
            const messages = {
                'pdf': '📄 PDF indiriliyor...',
                'excel': '📊 Excel dosyası hazırlanıyor...',
                'ical': '📅 iCal dosyası oluşturuluyor...',
                'print': '🖨️ Yazdırma penceresi açılıyor...'
            };
            
            showNotification(messages[format], 'info');
            
            if (format === 'print') {
                setTimeout(() => window.print(), 500);
            } else {
                setTimeout(() => {
                    showNotification(`✅ ${format.toUpperCase()} başarıyla hazırlandı!`, 'success');
                }, 2000);
            }
        }
        
        // Diğer fonksiyonlar
        function refreshUpcomingEvents() {
            showNotification('🔄 Etkinlikler yenileniyor...', 'info');
            setTimeout(() => {
                showNotification('✅ Etkinlikler güncellendi!', 'success');
            }, 1000);
        }
        
        function saveQuickNote() {
            const noteInput = document.getElementById('quickNotes');
            const note = noteInput ? noteInput.value.trim() : '';
            
            if (note) {
                const notes = JSON.parse(localStorage.getItem('quickNotes') || '[]');
                notes.push({
                    id: Date.now(),
                    text: note,
                    date: new Date().toLocaleString('tr-TR')
                });
                localStorage.setItem('quickNotes', JSON.stringify(notes));
                noteInput.value = '';
                showNotification('📝 Not kaydedildi!', 'success');
            } else {
                showNotification('⚠️ Lütfen bir not yazın!', 'warning');
            }
        }
        
        function loadQuickNotes() {
            const notes = JSON.parse(localStorage.getItem('quickNotes') || '[]');
            const noteInput = document.getElementById('quickNotes');
            
            if (notes.length > 0 && noteInput) {
                const lastNote = notes[notes.length - 1];
                noteInput.placeholder = `Son not: ${lastNote.text.substring(0, 30)}...`;
            }
        }
        
        function resetCalendar() {
            if (confirm('Tüm takvim verilerini sıfırlamak istediğinizden emin misiniz? Bu işlem geri alınamaz.')) {
                localStorage.clear();
                showNotification('🔄 Takvim sıfırlandı!', 'success');
                setTimeout(() => location.reload(), 1000);
            }
        }
        
        // Test hatırlatıcısı (demo amaçlı)
        function testReminder() {
            const testTime = new Date(Date.now() + 3000); // 3 saniye sonra
            scheduleReminder('Test Toplantısı', testTime, testTime);
            showAdvancedNotification('🧪 Test hatırlatıcısı 3 saniye sonra gelecek!', 'info', 2000);
        }
        
        // AI Assistant Functions
        function openAIAssistant() {
            const modal = document.getElementById('aiAssistantModal');
            if (modal) {
                modal.classList.remove('hidden');
            }
        }
        
        function closeAIAssistant() {
            const modal = document.getElementById('aiAssistantModal');
            if (modal) {
                modal.classList.add('hidden');
            }
        }
        
        function askAI(question) {
            const input = document.getElementById('aiInput');
            if (input) {
                input.value = question;
                sendAIMessage();
            }
        }
        
        function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Kullanıcı mesajını ekle
            addAIMessage(message, 'user');
            input.value = '';
            
            // AI yanıtını simüle et
            setTimeout(() => {
                const responses = {
                    'bugünkü programımı özetle': 'Bugün 3 toplantınız var: 14:00\'te Yönetim Kurulu, 16:00\'da Müşteri Görüşmesi ve 18:00\'de Spor Salonu. Toplam 4 saat yoğun bir gününüz olacak.',
                    'boş zamanlarımı göster': 'Bu hafta boş zamanlarınız: Yarın 10:00-12:00 arası, Çarşamba 15:00-17:00 arası ve Cuma sabahı 09:00-11:00 arası müsaitsiniz.',
                    'toplantı öner': 'Proje ekibiyle haftalık değerlendirme toplantısı öneriyorum. Yarın 10:30-11:30 arası uygun görünüyor. Toplantı Odası 1\'i ayırayım mı?',
                    'default': 'Anlıyorum. Bu konuda size yardımcı olmak için daha fazla bilgiye ihtiyacım var. Hangi tarih aralığında yardım istiyorsunuz?'
                };
                
                const response = responses[message.toLowerCase()] || responses['default'];
                addAIMessage(response, 'ai');
            }, 1000 + Math.random() * 1000);
        }
        
        function addAIMessage(message, sender) {
            const messagesContainer = document.getElementById('aiChatMessages');
            const messageDiv = document.createElement('div');
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex items-start gap-3 justify-end">
                        <div class="bg-blue-600 text-white rounded-lg p-3 max-w-sm">
                            <p class="text-sm">${message}</p>
                            <div class="text-xs text-blue-100 mt-1">${new Date().toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'})}</div>
                        </div>
                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex items-start gap-3">
                        <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                        </div>
                        <div class="bg-gray-100 rounded-lg p-3 max-w-sm">
                            <p class="text-sm text-gray-900">${message}</p>
                            <div class="text-xs text-gray-500 mt-1">${new Date().toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'})}</div>
                        </div>
                    </div>
                `;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // İletişim Fonksiyonları
        let currentChatContact = null;
        let chatMessages = {};
        
        // Chat Modal İşlemleri
        function openChatModal() {
            const modal = document.getElementById('chatModal');
            if (modal) {
                modal.classList.remove('hidden');
                loadChatHistory();
            }
        }
        
        function closeChatModal() {
            const modal = document.getElementById('chatModal');
            if (modal) {
                modal.classList.add('hidden');
                currentChatContact = null;
            }
        }
        
        function selectChatContact(contactName) {
            currentChatContact = contactName;
            const messagesContainer = document.getElementById('chatMessages');
            
            if (!chatMessages[contactName]) {
                chatMessages[contactName] = [
                    {
                        sender: contactName,
                        message: 'Merhaba! Nasıl yardımcı olabilirim?',
                        time: new Date(Date.now() - 300000).toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'})
                    }
                ];
            }
            
            displayChatMessages(contactName);
        }
        
        function displayChatMessages(contactName) {
            const messagesContainer = document.getElementById('chatMessages');
            const messages = chatMessages[contactName] || [];
            
            messagesContainer.innerHTML = `
                <div class="mb-4">
                    <div class="flex items-center gap-2 mb-3">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium">
                            ${contactName.split(' ').map(n => n[0]).join('')}
                        </div>
                        <div class="font-medium text-sm">${contactName}</div>
                    </div>
                </div>
                ${messages.map(msg => `
                    <div class="mb-3 ${msg.sender === 'Ben' ? 'text-right' : ''}">
                        <div class="inline-block max-w-xs px-3 py-2 rounded-lg text-sm ${
                            msg.sender === 'Ben' 
                                ? 'bg-indigo-600 text-white' 
                                : 'bg-gray-100 text-gray-900'
                        }">
                            ${msg.message}
                        </div>
                        <div class="text-xs text-gray-500 mt-1">${msg.time}</div>
                    </div>
                `).join('')}
            `;
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message || !currentChatContact) return;
            
            if (!chatMessages[currentChatContact]) {
                chatMessages[currentChatContact] = [];
            }
            
            chatMessages[currentChatContact].push({
                sender: 'Ben',
                message: message,
                time: new Date().toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'})
            });
            
            input.value = '';
            displayChatMessages(currentChatContact);
            
            // Otomatik yanıt simülasyonu
            setTimeout(() => {
                const responses = [
                    'Anladım, teşekkürler!',
                    'Tamam, hemen bakıyorum.',
                    'Bu konuyu değerlendirip size dönüş yapacağım.',
                    'Evet, bu mümkün. Detayları konuşalım.',
                    'Toplantıda bu konuyu ele alalım.'
                ];
                
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                chatMessages[currentChatContact].push({
                    sender: currentChatContact,
                    message: randomResponse,
                    time: new Date().toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'})
                });
                
                displayChatMessages(currentChatContact);
                showAdvancedNotification(`💬 ${currentChatContact} yanıt verdi`, 'info', 3000);
            }, 1000 + Math.random() * 2000);
        }
        
        function loadChatHistory() {
            const savedChats = localStorage.getItem('chatMessages');
            if (savedChats) {
                chatMessages = JSON.parse(savedChats);
            }
        }
        
        // SMS Modal İşlemleri
        function openSmsModal() {
            const modal = document.getElementById('smsModal');
            if (modal) {
                modal.classList.remove('hidden');
            }
        }
        
        function closeSmsModal() {
            const modal = document.getElementById('smsModal');
            if (modal) {
                modal.classList.add('hidden');
                clearSmsForm();
            }
        }
        
        function clearSmsForm() {
            const fields = ['smsPhone', 'smsMessage'];
            fields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) field.value = '';
            });
            
            const charCount = document.getElementById('smsCharCount');
            if (charCount) {
                charCount.textContent = '0';
                charCount.style.color = '#6b7280';
            }
        }
        
        function sendSms() {
            const phone = document.getElementById('smsPhone').value.trim();
            const message = document.getElementById('smsMessage').value.trim();
            
            if (!phone || !message) {
                showAdvancedNotification('⚠️ Lütfen telefon numarası ve mesaj alanlarını doldurun!', 'warning');
                return;
            }
            
            if (message.length > 160) {
                showAdvancedNotification('⚠️ SMS mesajı 160 karakteri geçemez!', 'warning');
                return;
            }
            
            // SMS gönderme simülasyonu
            showAdvancedNotification('📱 SMS gönderiliyor...', 'info', 2000);
            
            setTimeout(() => {
                const smsData = {
                    phone,
                    message,
                    timestamp: new Date().toLocaleString('tr-TR'),
                    id: Date.now()
                };
                
                // LocalStorage'a kaydet
                const sentSms = JSON.parse(localStorage.getItem('sentSms') || '[]');
                sentSms.push(smsData);
                localStorage.setItem('sentSms', JSON.stringify(sentSms));
                
                showAdvancedNotification(`✅ SMS başarıyla gönderildi! (${phone})`, 'success', 4000);
                closeSmsModal();
            }, 2000);
        }
        
        // Email Modal İşlemleri
        function openEmailModal() {
            const modal = document.getElementById('emailModal');
            if (modal) {
                modal.classList.remove('hidden');
            }
        }
        
        function closeEmailModal() {
            const modal = document.getElementById('emailModal');
            if (modal) {
                modal.classList.add('hidden');
                clearEmailForm();
            }
        }
        
        function clearEmailForm() {
            const fields = ['emailTo', 'emailCc', 'emailSubject', 'emailMessage'];
            fields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) field.value = '';
            });
            
            const checkboxes = ['emailPriority', 'emailReadReceipt'];
            checkboxes.forEach(checkboxId => {
                const checkbox = document.getElementById(checkboxId);
                if (checkbox) checkbox.checked = false;
            });
        }
        
        function formatEmail(command) {
            const textarea = document.getElementById('emailMessage');
            if (!textarea) return;
            
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            
            if (selectedText) {
                let formattedText = selectedText;
                
                switch(command) {
                    case 'bold':
                        formattedText = `**${selectedText}**`;
                        break;
                    case 'italic':
                        formattedText = `*${selectedText}*`;
                        break;
                }
                
                textarea.value = textarea.value.substring(0, start) + formattedText + textarea.value.substring(end);
                textarea.focus();
                textarea.setSelectionRange(start, start + formattedText.length);
            }
        }
        
        function insertEmailTemplate() {
            const templates = [
                {
                    name: 'Toplantı Daveti',
                    content: `Sayın [İsim],

[Tarih] tarihinde saat [Saat]'te [Konum]'da gerçekleştirilecek toplantıya davetlisiniz.

Gündem:
- [Madde 1]
- [Madde 2]
- [Madde 3]

Katılımınızı bekliyoruz.

Saygılarımla,
[İmza]`
                },
                {
                    name: 'Proje Güncellemesi',
                    content: `Merhaba,

[Proje Adı] projesi ile ilgili güncellemeler:

✅ Tamamlanan görevler:
- [Görev 1]
- [Görev 2]

🔄 Devam eden görevler:
- [Görev 3]
- [Görev 4]

📅 Gelecek adımlar:
- [Adım 1]
- [Adım 2]

Sorularınız için iletişime geçebilirsiniz.

İyi çalışmalar,
[İmza]`
                },
                {
                    name: 'Randevu Onayı',
                    content: `Sayın [İsim],

[Tarih] tarihinde saat [Saat]'te randevunuz onaylanmıştır.

Randevu Detayları:
- Tarih: [Tarih]
- Saat: [Saat]
- Konum: [Adres]
- Süre: [Süre]

Randevunuzu iptal etmeniz gerekirse lütfen en az 24 saat öncesinden bildiriniz.

Saygılarımla,
[İmza]`
                }
            ];
            
            // Template seçim modalı oluştur
            const templateModal = document.createElement('div');
            templateModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]';
            templateModal.innerHTML = `
                <div class="bg-white rounded-xl shadow-2xl max-w-md w-full mx-4">
                    <div class="p-4 border-b border-gray-200">
                        <h3 class="font-semibold text-gray-900">E-posta Şablonu Seç</h3>
                    </div>
                    <div class="p-4 space-y-2">
                        ${templates.map((template, index) => `
                            <button onclick="useEmailTemplate(${index}); this.closest('.fixed').remove();" 
                                    class="w-full text-left p-3 hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors">
                                <div class="font-medium text-sm">${template.name}</div>
                                <div class="text-xs text-gray-500 mt-1">${template.content.substring(0, 50)}...</div>
                            </button>
                        `).join('')}
                    </div>
                    <div class="p-4 border-t border-gray-200">
                        <button onclick="this.closest('.fixed').remove();" 
                                class="w-full px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">
                            İptal
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(templateModal);
            
            // Global template fonksiyonu
            window.useEmailTemplate = function(index) {
                const template = templates[index];
                const messageField = document.getElementById('emailMessage');
                if (messageField && template) {
                    messageField.value = template.content;
                }
            };
        }
        
        function saveDraft() {
            const emailData = {
                to: document.getElementById('emailTo').value,
                cc: document.getElementById('emailCc').value,
                subject: document.getElementById('emailSubject').value,
                message: document.getElementById('emailMessage').value,
                priority: document.getElementById('emailPriority').checked,
                readReceipt: document.getElementById('emailReadReceipt').checked,
                timestamp: new Date().toLocaleString('tr-TR'),
                id: Date.now()
            };
            
            const drafts = JSON.parse(localStorage.getItem('emailDrafts') || '[]');
            drafts.push(emailData);
            localStorage.setItem('emailDrafts', JSON.stringify(drafts));
            
            showAdvancedNotification('💾 E-posta taslak olarak kaydedildi!', 'success', 3000);
        }
        
        function sendEmail() {
            const to = document.getElementById('emailTo').value.trim();
            const subject = document.getElementById('emailSubject').value.trim();
            const message = document.getElementById('emailMessage').value.trim();
            
            if (!to || !subject || !message) {
                showAdvancedNotification('⚠️ Lütfen alıcı, konu ve mesaj alanlarını doldurun!', 'warning');
                return;
            }
            
            // E-posta doğrulama
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(to)) {
                showAdvancedNotification('⚠️ Geçerli bir e-posta adresi girin!', 'warning');
                return;
            }
            
            showAdvancedNotification('📧 E-posta gönderiliyor...', 'info', 2000);
            
            setTimeout(() => {
                const emailData = {
                    to,
                    cc: document.getElementById('emailCc').value,
                    subject,
                    message,
                    priority: document.getElementById('emailPriority').checked,
                    readReceipt: document.getElementById('emailReadReceipt').checked,
                    timestamp: new Date().toLocaleString('tr-TR'),
                    id: Date.now()
                };
                
                // LocalStorage'a kaydet
                const sentEmails = JSON.parse(localStorage.getItem('sentEmails') || '[]');
                sentEmails.push(emailData);
                localStorage.setItem('sentEmails', JSON.stringify(sentEmails));
                
                const actions = [
                    {
                        text: 'Gönderilenleri Gör',
                        onClick: 'showSentEmails()'
                    }
                ];
                
                showAdvancedNotification(`✅ E-posta başarıyla gönderildi! (${to})`, 'success', 5000, actions);
                closeEmailModal();
            }, 2000);
        }
        
        function showSentEmails() {
            const sentEmails = JSON.parse(localStorage.getItem('sentEmails') || '[]');
            
            if (sentEmails.length === 0) {
                showAdvancedNotification('📭 Henüz gönderilmiş e-posta bulunmuyor.', 'info');
                return;
            }
            
            const emailsModal = document.createElement('div');
            emailsModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]';
            emailsModal.innerHTML = `
                <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="p-4 border-b border-gray-200 flex items-center justify-between">
                        <h3 class="font-semibold text-gray-900">Gönderilen E-postalar</h3>
                        <button onclick="this.closest('.fixed').remove();" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="p-4 space-y-3">
                        ${sentEmails.slice(-10).reverse().map(email => `
                            <div class="border border-gray-200 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="font-medium text-sm">${email.subject}</div>
                                    <div class="text-xs text-gray-500">${email.timestamp}</div>
                                </div>
                                <div class="text-sm text-gray-600 mb-1">Kime: ${email.to}</div>
                                <div class="text-xs text-gray-500">${email.message.substring(0, 100)}...</div>
                                ${email.priority ? '<span class="inline-block bg-red-100 text-red-800 text-xs px-2 py-1 rounded mt-2">Yüksek Öncelik</span>' : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            document.body.appendChild(emailsModal);
        }
        
        // Contacts Modal Functions
        let contacts = [
            { id: 1, name: 'Ahmet Yılmaz', email: 'ahmet@sirket.com', phone: '+90 555 123 45 67', department: 'Pazarlama', position: 'Müdür' },
            { id: 2, name: 'Elif Kaya', email: 'elif@sirket.com', phone: '+90 555 234 56 78', department: 'İnsan Kaynakları', position: 'Uzman' },
            { id: 3, name: 'Mehmet Demir', email: 'mehmet@sirket.com', phone: '+90 555 345 67 89', department: 'IT', position: 'Geliştirici' },
            { id: 4, name: 'Ayşe Öztürk', email: 'ayse@sirket.com', phone: '+90 555 456 78 90', department: 'Muhasebe', position: 'Uzman' },
            { id: 5, name: 'Can Arslan', email: 'can@sirket.com', phone: '+90 555 567 89 01', department: 'Satış', position: 'Temsilci' }
        ];
        
        function openContactsModal() {
            const modal = document.getElementById('contactsModal');
            if (modal) {
                modal.classList.remove('hidden');
                loadContacts();
            }
        }
        
        function closeContactsModal() {
            const modal = document.getElementById('contactsModal');
            if (modal) {
                modal.classList.add('hidden');
            }
        }
        
        function loadContacts() {
            const contactsList = document.getElementById('contactsList');
            if (!contactsList) return;
            
            contactsList.innerHTML = contacts.map(contact => `
                <div class="flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer border border-gray-200" onclick="selectContact(${contact.id})">
                    <div class="w-10 h-10 bg-gradient-to-br from-teal-500 to-teal-600 rounded-full flex items-center justify-center text-white font-medium">
                        ${contact.name.split(' ').map(n => n[0]).join('')}
                    </div>
                    <div class="flex-1">
                        <div class="font-medium text-sm">${contact.name}</div>
                        <div class="text-xs text-gray-500">${contact.department}</div>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callContact('${contact.phone}')" class="p-1 hover:bg-green-100 rounded" title="Ara">
                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                            </svg>
                        </button>
                        <button onclick="event.stopPropagation(); emailContact('${contact.email}')" class="p-1 hover:bg-blue-100 rounded" title="E-posta">
                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function selectContact(contactId) {
            const contact = contacts.find(c => c.id === contactId);
            if (!contact) return;
            
            const contactDetails = document.getElementById('contactDetails');
            if (contactDetails) {
                contactDetails.innerHTML = `
                    <div class="max-w-md mx-auto">
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-teal-500 to-teal-600 rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-4">
                                ${contact.name.split(' ').map(n => n[0]).join('')}
                            </div>
                            <h3 class="text-xl font-semibold text-gray-900">${contact.name}</h3>
                            <p class="text-gray-600">${contact.position} - ${contact.department}</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                </svg>
                                <div>
                                    <div class="text-sm text-gray-600">E-posta</div>
                                    <div class="font-medium">${contact.email}</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                </svg>
                                <div>
                                    <div class="text-sm text-gray-600">Telefon</div>
                                    <div class="font-medium">${contact.phone}</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex gap-3 mt-6">
                            <button onclick="callContact('${contact.phone}')" class="flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                </svg>
                                Ara
                            </button>
                            <button onclick="emailContact('${contact.email}')" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                </svg>
                                E-posta
                            </button>
                            <button onclick="scheduleWithContact('${contact.name}')" class="flex-1 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                Randevu
                            </button>
                        </div>
                    </div>
                `;
            }
        }
        
        function addNewContact() {
            const name = prompt('Kişi adı:');
            const email = prompt('E-posta:');
            const phone = prompt('Telefon:');
            const department = prompt('Departman:');
            const position = prompt('Pozisyon:');
            
            if (name && email && phone) {
                const newContact = {
                    id: contacts.length + 1,
                    name,
                    email,
                    phone,
                    department: department || 'Belirtilmemiş',
                    position: position || 'Belirtilmemiş'
                };
                
                contacts.push(newContact);
                loadContacts();
                showAdvancedNotification('👤 Yeni kişi eklendi!', 'success', 3000);
            }
        }
        
        function callContact(phone) {
            showAdvancedNotification(`📞 ${phone} aranıyor...`, 'info', 3000);
        }
        
        function emailContact(email) {
            openEmailModal();
            setTimeout(() => {
                const emailToField = document.getElementById('emailTo');
                if (emailToField) {
                    emailToField.value = email;
                }
            }, 100);
        }
        
        function scheduleWithContact(name) {
            closeContactsModal();
            openEventModal('meeting');
            setTimeout(() => {
                const participantsField = document.getElementById('eventParticipants');
                if (participantsField) {
                    participantsField.value = name;
                }
            }, 100);
        }
        

    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'974465f2175e0c29',t:'MTc1NjA1NDc0Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
